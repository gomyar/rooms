<html>

<link href="/static/css/web.css" rel="stylesheet" type="text/css"/>
<script src="/static/js/jquery-1.4.4.min.js"></script>
<script src="/static/js/web.js"></script>
<script>
function join(instance_id)
{
    jQuery.post("/join_instance", { instance_uid: instance_uid }, function () { console.log("Ok"); });
}

</script>

<body>

<h2>Rooms Demo Server</h2>

<div id="game_list">
    
</div>

<div id="instance_list">
    <ul>
    {% for instance in instances %}
    <li><span>{{ instance.map_id }}</span>
        <span>Players: {{ instance.players }}</span>
        <div class="join_link" onclick="join_instance({{ instance.uid }});">Instance.name</div> 
        <form method="post" action="/join_instance">
        {% csrf_token %}
        <input type="hidden" name="instance_uid" value="{{ instance.uid }}"></input> 
        <input type="submit" value="Join"></input>
        </form>
    </li>
    {% endfor %}
    </ul>
</div>

<form method="post" action="/create_instance">
    {% csrf_token %}
    <select name="map_id">
        {% for map in available_maps %}
            <option value="{{ map.area_id }}">{{ map.area_name }}</option>
        {% endfor %}
    </select>
    <input type="submit" value="Create"></input>
</form>

</body>
</html>
